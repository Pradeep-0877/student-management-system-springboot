name: Deploy
on: 
    workflow_dispatch: 
        inputs: 
            environment: 
                type: environment
            Release_Version: 
                type: string
                required: true
jobs: 
    Build_images:
        environment: production
        runs-on: ubuntu-latest
        steps: 
            - name: downloading release assets... 
              uses: robinraju/release-downloader@v1.9
              with: 
                repository: ${{ github.repository }}
                tag: "v${{github.event.inputs.Release_Version}}"
                fileName: "app-${{github.event.inputs.Release_Version}}.zip"
                extract: false
            - run: |
                 unzip "app-${{github.event.inputs.Release_Version}}.zip"
            - name: checkout code
              uses: actions/checkout@v3
            - name: Build & push Docker image
              uses: mr-smithers-excellent/docker-build-push@v5
              with:
                   image: pradeep0877/student-management-app
                   tags: latest
                   registry: docker.io
                   dockerfile: Dockerfile
                   username: ${{ secrets.DOCKER_USERNAME }}
                   password: ${{ secrets.DOCKER_PASSWORD }}
            
      
